<div class="row" id="comunidades">
	<div class="col-lg-12">
		<section class="table">
			<div>
				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-header d-flex align-items-center">

					            <div class="col-lg-12">
						            <ol class="breadcrumb">
									    <li class="breadcrumb-item active" aria-current="page">Comunidades</li>
								  	</ol>
							  	</div>

					        </div>
							<div class="card-body">

								<div class="row">

									<div class="col-lg-2 col-md-4 col-sm-3">
						        		<button class="btn btn-default btn-sm" title="Agregar" ng-click="modalAddComunidad()" >Agregar <i class="fas fa-plus"></i>
						        		</button>
					        		</div>

						        	<div class="col-lg-2 col-md-4 col-sm-3">
						        		<button class="btn btn-primary btn-sm" title="Editar" ng-click="modalEditSegmento(id_comunidad_marcada)">Editar <i class="fas fa-edit"></i>
						        		</button>
					        		</div>

					        		<div class="col-lg-2 col-md-4 col-sm-3">
						        		<button class="btn btn-danger btn-sm" title="Eliminar" ng-click="deleteSegmento(id_comunidad_marcada)">Eliminar <i class="fas fa-trash-alt"></i>
						        		</button>
					        		</div>

									<div class="col-lg-2 col-md-4 col-sm-3">
						        		<button class="btn btn-info btn-sm" title="Detalles" ng-click="detallesComunidad(id_comunidad_marcada)">Detalles <i class="fas fa-list-ul"></i>
						        		</button>
					        		</div>

								</div>


					        	<br>

					        	<div class="container" >
								    <div class="row justify-content-md-center">
								        <div class="col-md-12" id="principal_container">

								        		<ul id="treeview">

									  				<li ng-repeat="segmento in segmentos">

									  					<a id="{{ segmento.ID_COMUNIDAD }}" ng-click="seleccionarLista(segmento.ID_COMUNIDAD, segmento.DEPENDE)" onclick="cargarPersonas(this.id)">
									        				{{ segmento.NOMBRE }}
									        			</a>

									            		<ul ng-if="segmento.COMUNIDADES.length > 0">

									            			<li ng-repeat="comunidad in segmento.COMUNIDADES">

									            				<a id="{{ comunidad.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad.ID_COMUNIDAD, comunidad.DEPENDE)" onclick="cargarPersonas(this.id)">
									            					{{ comunidad.NOMBRE }}
									            				</a>


									            				<ul ng-if="comunidad.COMUNIDADES.length > 0">

									            					<li ng-repeat="comunidad2 in comunidad.COMUNIDADES">

									            						<a id="{{ comunidad2.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad2.ID_COMUNIDAD, comunidad2.DEPENDE)" onclick="cargarPersonas(this.id)">
									            							{{ comunidad2.NOMBRE }}
									            						</a>

																		<!-- Buscar comunidades -->
																		<ul ng-if="comunidad2.COMUNIDADES.length > 0">
																			<li ng-repeat="comunidad3 in comunidad2.COMUNIDADES">

																				<a id="{{ comunidad3.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad3.ID_COMUNIDAD, comunidad3.DEPENDE)" onclick="cargarPersonas(this.id)">
											            							{{ comunidad3.NOMBRE }}
											            						</a>

																				<!-- Buscar comunidades -->
																				<ul ng-if="comunidad3.COMUNIDADES.length > 0" >
																					<li ng-repeat="comunidad4 in comunidad3.COMUNIDADES">
																						<a id="{{ comunidad4.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad4.ID_COMUNIDAD, comunidad4.DEPENDE)" onclick="cargarPersonas(this.id)">
													            							{{ comunidad4.NOMBRE }}
													            						</a>
																					</li>
																				</ul>

																			</li>
																		</ul>

									            					</li>

									            				</ul>

									            			</li>

									                    </ul>
									            	</li>

								            	</ul>

								        </div>
								    </div>
								</div>
							  </div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>

	<!-- Personas
	<div class="col-lg-8" ng-if="id_comunidad_marcada">
		<section class="table">
			<div class="">
				<div class="row">
					<div class="col-lg-12">
					    <div class="card">
					        <div class="card-header d-flex align-items-center">

					            <div class="col-lg-10">
						            <ol class="breadcrumb">

									    <li ng-if="equipo_trabajo == 0" class="breadcrumb-item active" aria-current="page">{{ segmento_personas.NOMBRE }} / PERSONAS</li>

										<li ng-if="equipo_trabajo == 1" class="breadcrumb-item active" aria-current="page">{{ segmento_personas.NOMBRE }} / {{ persona_encargado.NOMBRE }} / Equipo de Trabajo</li>
								  	</ol>
							  	</div>

					        </div>
					        <div class="card-body">

					        	<div class="row">
					        		<div class="col-lg-6">
					        			<div class="input-group mb-3">
										  	<input type="text" class="form-control" placeholder="Buscar..." ng-model="search" ng-change="filter()">
										  	<div class="input-group-prepend">
											    <span class="input-group-text" id="basic-addon1">
											    	<i class="fas fa-search"></i>
											    </span>
										  	</div>
										</div>
					        		</div>

									<div class="col-lg-3" ng-if="equipo_trabajo == 0">
					        			<button class="btn btn-primary btn-block" title="Crear persona" ng-click="modalAddPersona()">Crear
					        				<i class="fas fa-plus"></i>
					        			</button>
					        		</div>
									<div class="col-lg-3" ng-if="equipo_trabajo == 0">
					        			<button class="btn btn-default btn-block" title="Agregar persona existente" ng-click="modalAddPersonaExistente()">Agregar
					        				<i class="fas fa-user-plus"></i>
					        			</button>
					        		</div>

									<div class="col-lg-3" ng-if="equipo_trabajo == 1">
					        			<button class="btn btn-primary btn-block" title="Crear persona en equipo de trabajo" ng-click="modalAddEquipoTrabajo()">Crear
					        				<i class="fas fa-plus"></i>
					        			</button>
					        		</div>

					        	</div>
					        	<br>

								<div ng-if="equipo_trabajo == 0">

						        	<div class="row" ng-show="filter_data > 0">

						        		<div class="col-lg-12">
						        			<div class="table-responsive">
									            <table class="table table-sm">
									                <thead>
									                    <tr>
									                        <th style="width: 70%">
									                        	Nombre
									                        	&nbsp;<a href="" ng-click="sort_with('NOMBRE')" style="color: inherit;"><i class="fas fa-sort"></i></a>
									                        </th>

									                        <th style="width: 30%">Acción</th>
									                    </tr>
									                </thead>
									                <tbody>
									                    <tr ng-repeat="persona in searched = (personas | filter:search | orderBy : base :reverse) | beginning_data:(current_grid - 1) * data_limit | limitTo:data_limit">
									                        <td>{{ persona.NOMBRE }}</td>

									                        <td>
																<!--
									                        	<button class="btn btn-default btn-sm" ng-click="detailsPersona(persona.ID_PERSONA)">
									                            	<i class="fas fa-info-circle"></i>
										                        </button>
																<button class="btn btn-primary btn-sm" ng-click="modalEditPersona(persona.ID_PERSONA)">
										                        	<i class="fas fa-edit"></i>
										                        </button>

																<button ng-if="persona.ENCARGADO" ng-click="verEquipoTrabajo(persona.ID_PERSONA)" class="btn btn-info btn-sm" title="Equipo de Trabajo" ng-click="modalEditPersona(persona.ID_PERSONA)">
										                        	<i class="fas fa-users"></i>
										                        </button>

										                        <button class="btn btn-danger btn-sm" ng-click="deletePersona(persona.ID_PERSONA)">
										                            <i class="fas fa-minus-circle"></i>
										                        </button>
									                        </td>
									                    </tr>
									                </tbody>
									            </table>
						        			</div>
						        		</div>

						        	</div>

						        	<div class="row" ng-show="filter_data > 0">

						        		<div class="col-lg-6">

						        			<ul uib-pagination boundary-links="true" items-per-page="data_limit" total-items="filter_data" ng-model="current_grid" ng-change="pageChanged()" first-text="Primera" last-text="Última" previous-text="&laquo;" next-text="&raquo;" num-pages="numPages" max-size="maxSize"></ul>

						        		</div>

						        	</div>

						        	<div class="col-md-12" ng-show="filter_data == 0">
										<h4 class="text-center">-- No se encontraron registros --</h4>
									</div>

								</div>

								<div ng-if="equipo_trabajo == 1">
									<div class="row" ng-show="filter_data_equipo_trabajo > 0">

						        		<div class="col-lg-12">
						        			<div class="table-responsive">
									            <table class="table table-sm">
									                <thead>
									                    <tr>
									                        <th style="width: 70%">
									                        	Nombre
									                        	&nbsp;<a href="" ng-click="sort_with('NOMBRE')" style="color: inherit;"><i class="fas fa-sort"></i></a>
									                        </th>

									                        <th style="width: 30%">Acción</th>
									                    </tr>
									                </thead>
									                <tbody>
									                    <tr ng-repeat="integrante in searched = (integrantes_equipo | filter:search | orderBy : base :reverse) | beginning_data:(current_grid - 1) * data_limit | limitTo:data_limit">
									                        <td>{{ integrante.NOMBRE }}</td>

									                        <td>
									                        	<button class="btn btn-default btn-sm" ng-click="detailsPersona(integrante.ID_PERSONA)">
									                            	<i class="fas fa-info-circle"></i>
										                        </button>

																<button class="btn btn-primary btn-sm" ng-click="modalEditPersona(integrante.ID_PERSONA)">
										                        	<i class="fas fa-edit"></i>
										                        </button>

										                        <button class="btn btn-danger btn-sm" ng-click="deleteEquipoTrabajo(integrante.ID_PERSONA, integrante.ID_ENCARGADO)">
										                            <i class="fas fa-minus-circle"></i>
										                        </button>
									                        </td>
									                    </tr>
									                </tbody>
									            </table>
						        			</div>
						        		</div>

						        	</div>

									<div class="row" ng-show="filter_data_equipo_trabajo > 0">

						        		<div class="col-lg-6">

						        			<ul uib-pagination boundary-links="true" items-per-page="data_limit" total-items="filter_data_equipo_trabajo" ng-model="current_grid" ng-change="pageChanged()" first-text="Primera" last-text="Última" previous-text="&laquo;" next-text="&raquo;" num-pages="numPages" max-size="maxSize"></ul>

						        		</div>

						        	</div>

						        	<div class="col-md-12" ng-show="filter_data_equipo_trabajo == 0">
										<h4 class="text-center">-- No se encontraron registros --</h4>
									</div>
								</div>

					    	</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
	-->
</div>

<!-- Agregar -->
<div class="modal fade" id="modalRegistrarComunidad" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Nuevo Segmento</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		        	<span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
	      	<form ng-submit="addComunidad()">
		    <div class="modal-body">
		    	<div class="row">

					<div class="col-lg-6">
						<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Nombre</label>
							    <input id="nuevo_nombre" type="text" class="form-control" ng-model="segmento.NOMBRE" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Descripción</label>
							    <textarea class="form-control" rows="5" ng-model="segmento.DESCRIPCION"></textarea>
	  						</div>
			    		</div>
						<div class="col-lg-12">
							<div class="row">
								<!-- <div class="col-lg-6">
									<div class="form-group">
										<label>Zona</label>
										<input type="text" ng-model="segmento.ZONA" class="form-control">
									</div>
								</div> -->
								<div class="col-lg-6">
					    			<div class="form-group">
									    <label>Oculta</label>
										<br>
										<input type="checkbox" id="toggle-one" data-toggle="toggle">
			  						</div>
					    		</div>
							</div>
						</div>

					</div>

					<div class="col-lg-6">
						<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Depende</label>

								<div id="addTree">

									<ul>

										<li ng-repeat="segmento in segmentosAdd">

											<a id="{{ segmento.ID_COMUNIDAD }}" onclick="seleccionarComunidadAgregar(this.id)">
												{{ segmento.NOMBRE }}
											</a>

											<ul ng-if="segmento.COMUNIDADES.length > 0">

												<li ng-repeat="comunidad in segmento.COMUNIDADES">

													<a id="{{ comunidad.ID_COMUNIDAD }}" onclick="seleccionarComunidadAgregar(this.id)">
														{{ comunidad.NOMBRE }}
													</a>


													<ul ng-if="comunidad.COMUNIDADES.length > 0">

														<li ng-repeat="comunidad2 in comunidad.COMUNIDADES">

															<a id="{{ comunidad2.ID_COMUNIDAD }}" onclick="seleccionarComunidadAgregar(this.id)">
																{{ comunidad2.NOMBRE }}
															</a>

															<!-- Buscar comunidades -->
															<ul ng-if="comunidad2.COMUNIDADES.length > 0">
																<li ng-repeat="comunidad3 in comunidad2.COMUNIDADES">

																	<a id="{{ comunidad3.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad3.ID_COMUNIDAD, comunidad3.DEPENDE)" onclick="seleccionarComunidadAgregar(this.id)">
																		{{ comunidad3.NOMBRE }}
																	</a>

																	<!-- Buscar comunidades -->
																	<ul ng-if="comunidad3.COMUNIDADES.length > 0" >
																		<li ng-repeat="comunidad4 in comunidad3.COMUNIDADES">
																			<a id="{{ comunidad4.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad4.ID_COMUNIDAD, comunidad4.DEPENDE)" onclick="seleccionarComunidadAgregar(this.id)">
																				{{ comunidad4.NOMBRE }}
																			</a>
																		</li>
																	</ul>

																</li>
															</ul>

														</li>

													</ul>

												</li>

											</ul>
										</li>

									</ul>

								</div>
	  						</div>
			    		</div>
					</div>



		    	</div>
		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		        <button type="submit" class="btn btn-primary">Guardar</button>
	      	</div>
	      	</form>
	    </div>
  	</div>
</div>

<div class="modal fade" id="modalRegistrarComunidadSegmento" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Nueva comunidad</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		        	<span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
	      	<form ng-submit="addComunidadSegmento()">
		    <div class="modal-body">
		    	<div class="row">
		    		<div class="col-lg-12">
		    			<div class="form-group">
						    <label>Nombre</label>
						    <input id="nuevo_nombre" type="text" class="form-control" ng-model="comunidad.NOMBRE" required>
  						</div>
		    		</div>
		    		<div class="col-lg-12">
		    			<div class="form-group">
						    <label>Descripción</label>
						    <textarea class="form-control" ng-model="comunidad.DESCRIPCION"></textarea>
  						</div>
		    		</div>
		    	</div>
		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		        <button type="submit" class="btn btn-primary">Guardar</button>
	      	</div>
	      	</form>
	    </div>
  	</div>
</div>

<!-- Editar -->
<div class="modal fade" id="modalEditarComunidad" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Editar Segmento</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		        	<span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
	      	<form ng-submit="editComunidad()">
		    <div class="modal-body">
		    	<div class="row">

					<div class="col-lg-6">
						<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Nombre</label>
							    <input id="nuevo_nombre" type="text" class="form-control" ng-model="comunidad_edit.NOMBRE">
	  						</div>
			    		</div>
			    		<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Descripción</label>
							    <textarea class="form-control" rows="5" ng-model="comunidad_edit.DESCRIPCION"></textarea>
	  						</div>
			    		</div>
						<div class="col-lg-12">
							<div class="row">
								<div class="col-lg-6">
									<div class="form-group">
										<label>Oculta</label>
										<br>
										<input type="checkbox" id="toggle-two" data-toggle="toggle">
									</div>
								</div>
							</div>
						</div>

					</div>

					<div class="col-lg-6">
						<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Depende</label>

								<div id="editTree">

									<ul>

										<li ng-repeat="segmento in segmentosEdit" id="li{{segmento.ID_COMUNIDAD}}">

											<a id="{{ segmento.ID_COMUNIDAD }}" onclick="seleccionarComunidadEditar(this.id)">
												{{ segmento.NOMBRE }}
											</a>

											<ul ng-if="segmento.COMUNIDADES.length > 0">

												<li ng-repeat="comunidad in segmento.COMUNIDADES" id="li{{comunidad.ID_COMUNIDAD}}">

													<a id="{{ comunidad.ID_COMUNIDAD }}" onclick="seleccionarComunidadEditar(this.id)">
														{{ comunidad.NOMBRE }}
													</a>


													<ul ng-if="comunidad.COMUNIDADES.length > 0">

														<li ng-repeat="comunidad2 in comunidad.COMUNIDADES" id="li{{comunidad2.ID_COMUNIDAD}}">

															<a id="{{ comunidad2.ID_COMUNIDAD }}" onclick="seleccionarComunidadEditar(this.id)">
																{{ comunidad2.NOMBRE }}
															</a>

															<!-- Buscar comunidades -->
															<ul ng-if="comunidad2.COMUNIDADES.length > 0">
																<li ng-repeat="comunidad3 in comunidad2.COMUNIDADES" id="li{{comunidad3.ID_COMUNIDAD}}">

																	<a id="{{ comunidad3.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad3.ID_COMUNIDAD, comunidad3.DEPENDE)" onclick="seleccionarComunidadEditar(this.id)">
																		{{ comunidad3.NOMBRE }}
																	</a>

																	<!-- Buscar comunidades -->
																	<ul ng-if="comunidad3.COMUNIDADES.length > 0" >
																		<li ng-repeat="comunidad4 in comunidad3.COMUNIDADES" id="li{{comunidad4.ID_COMUNIDAD}}">
																			<a id="{{ comunidad4.ID_COMUNIDAD }}" ng-click="seleccionarLista(comunidad4.ID_COMUNIDAD, comunidad4.DEPENDE)" onclick="seleccionarComunidadEditar(this.id)">
																				{{ comunidad4.NOMBRE }}
																			</a>
																		</li>
																	</ul>

																</li>
															</ul>

														</li>

													</ul>

												</li>

											</ul>
										</li>

									</ul>

								</div>

	  						</div>
			    		</div>
					</div>



		    	</div>
		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		        <button type="submit" class="btn btn-primary">Guardar</button>
	      	</div>
	      	</form>
	    </div>
  	</div>
</div>

<!-- Modal Roles -->
<div class="modal fade bd-example-modal-xl" id="modalRoles" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      ...
    </div>
  </div>
</div>

<!-- PERSONAS -->
<!-- Agregar -->
<div class="modal fade" id="modalRegistrarPersona" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Nueva persona</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
	      	<form ng-submit="addPersona()">
		    <div class="modal-body">

				<div class="row justify-content-md-center">
					<div class="col-lg-6">
						<div class="form-group">
							<label>Seleccione el tipo de persona</label>
							<select class="form-control" ng-model="persona.TIPO_PERSONA" required>
								<option value="">-- Seleccione una opción --</option>
								<option value="1">Persona</option>
								<option value="2">Encargado</option>
							</select>
						</div>
					</div>
				</div>

				<div ng-if="persona.TIPO_PERSONA == 1 || persona.TIPO_PERSONA == 2">
					<div class="row">
			    		<div class="col-lg-8">
			    			<div class="form-group">
							    <label>Nombre</label>
							    <input id="nuevo_nombre" type="text" class="form-control" ng-model="persona.NOMBRE" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-4">
			    			<div class="form-group">
							    <label>Telefono</label>
							    <input type="text" class="form-control" ng-model="persona.TELEFONO" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-6">
			    			<div class="form-group">
							    <label>Email</label>
							    <input type="email" ng-model="persona.EMAIL" class="form-control" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-6">
			    			<div class="form-group">
							    <label>Email Alternativo</label>
							    <input type="email" ng-model="persona.EMAIL_ALTERNATIVO" class="form-control">
	  						</div>
			    		</div>
			    		<div class="col-lg-8" ng-if="persona.TIPO_PERSONA == 1">
			    			<div class="form-group">
							    <label>Rol</label>
							    <select multiple class="form-control" ng-model="persona.ID_ROL" required>
							    	<option value="">-- Seleccione una opción --</option>
							    	<option ng-repeat="rol in roles" ng-value="{{ rol.ID_ROL }}">{{ rol.NOMBRE }}</option>
							    </select>
	  						</div>
			    		</div>

						<!-- Zona -->
						<div class="col-lg-4">
							<div class="form-group">
								<label>Zona</label>
								<input type="text" class="form-control" ng-model="persona.ZONA" required>
							</div>
						</div>

						<!-- Si la persona es tipo 1 -->
			    		<div class="col-lg-12" ng-if="persona.TIPO_PERSONA == 1">
			    			<div class="form-group">
							    <label>Dependencia</label>
							    <select class="form-control" ng-model="persona.ID_DEPENDENCIA" required>
							    	<option value="">-- Seleccione una opción --</option>
							    	<option ng-repeat="dependencia in dependencias" ng-value="{{ dependencia.ID_DEPENDENCIA }}">{{ dependencia.NOMBRE }}</option>
							    </select>
	  						</div>
			    		</div>

						<!-- Si la persona es tipo 2 -->
						<div class="col-lg-8" ng-if="persona.TIPO_PERSONA == 2">
			    			<div class="form-group">
							    <label>Dependencia</label>
							    <textarea rows="2" class="form-control" ng-model="persona.DEPENDENCIA" required></textarea>
	  						</div>
			    		</div>

			    	</div>
				</div>

		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		        <button type="submit" class="btn btn-primary">Guardar</button>
	      	</div>
	      	</form>
	    </div>
  	</div>
</div>

<!-- Editar -->
<div class="modal fade" id="modalEditarPersona" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Editar persona</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
	      	<form ng-submit="editPersona()">
		    <div class="modal-body">

		    	<div class="row">
		    		<div class="col-lg-8">
		    			<div class="form-group">
						    <label>Nombre</label>
						    <input type="text" class="form-control" ng-model="persona_edit.NOMBRE" required>
  						</div>
		    		</div>
		    		<div class="col-lg-4">
		    			<div class="form-group">
						    <label>Telefono</label>
						    <input type="text" class="form-control" ng-model="persona_edit.TELEFONO" required>
  						</div>
		    		</div>
		    		<div class="col-lg-8">
		    			<div class="form-group">
						    <label>ID Dispositivo</label>
						    <input type="text" ng-model="persona_edit.ID_DISPOSITIVO" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-4">
		    			<div class="form-group">
						    <label>Plataforma</label>
						    <input type="text" ng-model="persona_edit.PLATAFORMA" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>Email</label>
						    <input type="email" ng-model="persona_edit.EMAIL" class="form-control">
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>Email Alternativo</label>
						    <input type="email" ng-model="persona_edit.EMAIL_ALTERNATIVO" class="form-control">
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>Fecha de modificación</label>
						    <input type="text" ng-model="persona_edit.FECHA_MODIFICACION" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>DPI</label>
						    <input type="text" ng-model="persona_edit.DPI" class="form-control">
  						</div>
		    		</div>
		    		<div class="col-lg-12">
		    			<div class="form-group">
						    <label>Rol</label>

						    <select multiple class="form-control" ng-model="persona_edit.ID_ROL" ng-if="persona_edit.ES_ENCARGADO == 0 && persona_edit.ES_EQUIPO_TRABAJO == 0" required>
						    	<option value="">-- Seleccione una opción --</option>
						    	<option ng-repeat="rol in roles" value="{{ rol.ID_ROL }}">{{ rol.NOMBRE }}</option>
						    </select>

							<input type="text" class="form-control" ng-if="persona_edit.ES_ENCARGADO == 1 || persona_edit.ES_EQUIPO_TRABAJO == 1">

  						</div>
		    		</div>
		    		<div class="col-lg-12">
		    			<div class="form-group">
						    <label>Dependencia</label>

						    <select class="form-control" ng-model="persona_edit.ID_DEPENDENCIA" ng-if="persona_edit.ES_ENCARGADO != 1 && persona_edit.ES_EQUIPO_TRABAJO != 1" required>
						    	<option value="">-- Seleccione una opción --</option>
						    	<option ng-repeat="dependencia in dependencias" value="{{ dependencia.ID_DEPENDENCIA }}">{{ dependencia.NOMBRE }}</option>
						    </select>

							<input type="text" class="form-control" ng-if="persona_edit.ES_ENCARGADO == 1" ng-model="persona_edit.DEPENDENCIA">

							<input type="text" class="form-control" ng-if="persona_edit.ES_ENCARGADO == 0 && persona_edit.ES_EQUIPO_TRABAJO == 1" ng-model="persona_edit.DEPENDENCIA" readonly>

  						</div>
		    		</div>
		    	</div>
		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		        <button type="submit" class="btn btn-primary">Guardar</button>
	      	</div>
	      	</form>
	    </div>
  	</div>
</div>

<!-- Detalles -->
<div class="modal fade" id="modalDetallesPersona" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Detalles de persona
					<span class="badge badge-primary" ng-if="persona_detalles.ES_ENCARGADO == 1">Encargado</span>
					<span class="badge badge-secondary" ng-if="persona_detalles.ES_EQUIPO_TRABAJO == 1">Equipo de Trabajo</span>
				</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
		    <div class="modal-body">
		    	<div class="row">
		    		<div class="col-lg-8">
		    			<div class="form-group">
						    <label>Nombre</label>
						    <input type="text" class="form-control" ng-model="persona_detalles.NOMBRE" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-4">
		    			<div class="form-group">
						    <label>Telefono</label>
						    <input type="text" class="form-control" ng-model="persona_detalles.TELEFONO" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-8">
		    			<div class="form-group">
						    <label>ID Dispositivo</label>
						    <input type="text" ng-model="persona_detalles.ID_DISPOSITIVO" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-4">
		    			<div class="form-group">
						    <label>Plataforma</label>
						    <input type="text" ng-model="persona_detalles.PLATAFORMA" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>Email</label>
						    <input type="email" ng-model="persona_detalles.EMAIL" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>Email Alternativo</label>
						    <input type="email" ng-model="persona_detalles.EMAIL_ALTERNO" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>Fecha de modificación</label>
						    <input type="email" ng-model="persona_detalles.FECHA_MODIFICACION" class="form-control" readonly>
  						</div>
		    		</div>
		    		<div class="col-lg-6">
		    			<div class="form-group">
						    <label>DPI</label>
						    <input type="email" ng-model="persona_detalles.DPI" class="form-control" readonly>
  						</div>
		    		</div>

		    		<div class="col-lg-12">
		    			<div class="form-group">
						    <label>Rol</label>
						    <select multiple class="form-control" ng-model="persona_detalles.ID_ROL" ng-if="persona_detalles.ID_ROL != NULL" readonly>
						    	<option value="">-- Seleccione una opción --</option>
						    	<option ng-repeat="rol in roles" value="{{ rol.ID_ROL }}">{{ rol.NOMBRE }}</option>
						    </select>
							<input type="text" class="form-control" ng-if="persona_detalles.ID_ROL == NULL" readonly>
  						</div>
		    		</div>

		    		<div class="col-lg-12">
		    			<div class="form-group">
						    <label>Dependencia</label>
						    <select class="form-control" ng-model="persona_detalles.ID_DEPENDENCIA" ng-if="persona_detalles.ID_DEPENDENCIA != NULL" readonly>
						    	<option value="">-- Seleccione una opción --</option>
						    	<option ng-repeat="dependencia in dependencias" value="{{ dependencia.ID_DEPENDENCIA }}">{{ dependencia.NOMBRE }}</option>
						    </select>
							<input type="text" class="form-control" ng-model="persona_detalles.DEPENDENCIA" ng-if="persona_detalles.ID_DEPENDENCIA == NULL" readonly>
  						</div>
		    		</div>

		    	</div>
		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
	      	</div>
	    </div>
  	</div>
</div>

<!-- Modal para agregar persona existente -->
<div class="modal fade" id="modalAddPersonaExistente" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Agregar persona existente</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
			<form ng-submit="addPersonaExistente()">
			    <div class="modal-body">
					<div class="row">
						<div class="col-lg-6">
			    			<div class="form-group">
							    <label>Ingrese el nombre de la persona</label>
							    <input type="text" ng-model="busqueda_persona.NOMBRE" id="buscar_persona" class="form-control" ng-change="buscar_persona()" required>
	  						</div>
			    		</div>
						<div class="col-lg-12">
			    			<div class="form-group">
							    <label>Resultados</label>
							    <select class="custom-select" size="10" required id="persona_agregar">
									<option ng-if="personas_resultado.length > 0" value="{{ persona_resultado.ID_PERSONA }}" ng-repeat="persona_resultado in personas_resultado">{{ persona_resultado.NOMBRE }}</option>
									<option value="" ng-if="personas_resultado.length == 0">--No se encontraron resultados --</option>
							    </select>
	  						</div>
			    		</div>
					</div>
			    </div>
		      	<div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
					<button type="submit" class="btn btn-primary">Guardar</button>
		      	</div>
			</form>
	    </div>
  	</div>
</div>


<!-- EQUIPO DE TRABAJO -->
<!-- Agregar equipo de trabajo -->
<div class="modal fade" id="modalRegistrarEquipoTrabajo" tabindex="-1" role="dialog" aria-hidden="true">
  	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    <div class="modal-content">
	    	<div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel">Agregar a equipo de trabajo</h5>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
	      	</div>
	      	<form ng-submit="addEquipoTrabajo()">
		    <div class="modal-body">
				<div>
					<div class="row">
			    		<div class="col-lg-8">
			    			<div class="form-group">
							    <label>Nombre</label>
							    <input id="nuevo_nombre" type="text" class="form-control" ng-model="persona_eqp.NOMBRE" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-4">
			    			<div class="form-group">
							    <label>Telefono</label>
							    <input type="text" class="form-control" ng-model="persona_eqp.TELEFONO" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-6">
			    			<div class="form-group">
							    <label>Email</label>
							    <input type="email" ng-model="persona_eqp.EMAIL" class="form-control" required>
	  						</div>
			    		</div>
			    		<div class="col-lg-6">
			    			<div class="form-group">
							    <label>Email Alternativo</label>
							    <input type="email" ng-model="persona_eqp.EMAIL_ALTERNATIVO" class="form-control">
	  						</div>
			    		</div>

						<div class="col-lg-4">
							<div class="form-group">
								<label>Zona</label>
								<input type="text" class="form-control" ng-model="persona_eqp

								.ZONA" required>
							</div>
						</div>
			    	</div>
				</div>

		    </div>
	      	<div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
		        <button type="submit" class="btn btn-primary">Guardar</button>
	      	</div>
	      	</form>
	    </div>
  	</div>
</div>
